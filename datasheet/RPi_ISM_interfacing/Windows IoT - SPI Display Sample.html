<!DOCTYPE html>
<!-- saved from url=(0067)https://ms-iot.github.io/content/en-US/win10/samples/SPIDisplay.htm -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><script src="./Windows IoT - SPI Display Sample_files/getid.js"></script>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Windows IoT - SPI Display Sample</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Get Windows and development tools to easily build and manage the next generation of Internet of Things solutions on multiple platforms.">
    <meta name="keywords" content="Internet of Things, Internet of Your Things, IoT, Windows IoT, Microsoft IoT, Connected Devices, Windows Universal Apps, Universal Apps, Windows 10, Windows 10 IoT Core, Development Board, Raspberry Pi, Raspberry Pi 2, Intel Galileo, Intel Galileo Gen 2, Galileo, MinnowBoard Max, MBM, Windows Developers, Windows Developer Program for IoT, Makers, Maker Faire, Internet Connected Devices, Connect the Dots, .NET Micro Framework, .NET MF, Windows Embedded, Arduino, Smart things, Smart devices, Smart connected devices, Home Automation, Robot, Maker Cloud, Windows Analytics, Windows Dashboard">

    <link id="linkBaseUrl" href="https://ms-iot.github.io/content">

    <link rel="icon" type="image/png" href="http://ms-iot.github.io/content/favicon.png">
    <!--[if IE]><link rel="shortcut icon" href="http://ms-iot.github.io/content/favicon.ico"/><![endif]-->

    <!-- Bootstrap core CSS -->
    <link href="./Windows IoT - SPI Display Sample_files/bootstrap.css" rel="stylesheet">
    <link href="./Windows IoT - SPI Display Sample_files/pygments.css" rel="stylesheet">
    <link href="./Windows IoT - SPI Display Sample_files/main.css" rel="stylesheet">
    

    <link href="./Windows IoT - SPI Display Sample_files/nav.css" rel="stylesheet">

    <script type="text/javascript">
        var appInsights = window.appInsights || function (config) {
            function s(config) { t[config] = function () { var i = arguments; t.queue.push(function () { t[config].apply(t, i) }) } } var t = { config: config }, r = document, f = window, e = "script", o = r.createElement(e), i, u; for (o.src = config.url || "//az416426.vo.msecnd.net/scripts/a/ai.0.js", r.getElementsByTagName(e)[0].parentNode.appendChild(o), t.cookie = r.cookie, t.queue = [], i = ["Event", "Exception", "Metric", "PageView", "Trace"]; i.length;) s("track" + i.pop()); return config.disableExceptionTracking || (i = "onerror", s("_" + i), u = f[i], f[i] = function (config, r, f, e, o) { var s = u && u(config, r, f, e, o); return s !== !0 && t["_" + i](config, r, f, e, o), s }), t
        }({
            instrumentationKey: "e38fbe82-9f06-4e70-a70e-86e018b1cbdf"
        });

        window.appInsights = appInsights;
        <!-- appInsights.trackPageView(); -->
		
		appInsights.trackPageView(null, null, {urlReferrer: document.referrer});
		
    </script><style type="text/css"></style><script src="./Windows IoT - SPI Display Sample_files/ai.0.js"></script>


</head>

<body class="default-body">
    <div class="chrome-header-wrapper">
        
  <link href="./Windows IoT - SPI Display Sample_files/shell.min.css" rel="stylesheet" type="text/css">

<!--[if lte IE 8]>
    <link href="https://assets.onestore.ms/cdnfiles/onestorerolling-1511-01000/shell/common/respond-proxy.html" id="respond-proxy" rel="respond-proxy"/>
<![endif]-->
<div id="shell-header" class="shell-rwd shell-rwd shell-bottomborder shell-header " lang="en">
    <div class="shell-header-L1-bar" style="height: 47px;"></div>
    <div class="shell-header-wrapper">
        <div class="shell-header-top" data-bi-area="HeaderL0" data-bi-view="L0V1">
            <div class="shell-header-topfix">
                <div class="shell-header-brand">
                    <a id="srv_shellHeaderMicrosoftLogo" href="https://www.microsoft.com/" title="Microsoft" data-bi-name="BrandLogo">
                        <img src="./Windows IoT - SPI Display Sample_files/microsoft.png" alt="Microsoft" class="img-responsive">
                    </a>
                </div>

                <ul class="shell-header-toggle">
                        <li>
                            <button class="shell-header-toggle-search" type="button" data-bi-name="Toggle Search Icon">
                                <i class="shell-icon-search"></i>
                            </button>
                        </li>
                                        <li>
                        <button class="shell-header-toggle-menu" type="button" data-bi-name="Toggle Menu">
                            <i class="shell-icon-menu"></i>
                        </button>
                    </li>
                </ul>

                    <h2 class="shell-header-subtitle shell-header-mtop">
                        <span class="shell-header-vertical-bar"></span>
                        <a href="https://dev.windows.com/en-us" data-bi-name="Segment Title">Windows Dev Center</a>
                    </h2>
            </div>
            <div class="shell-header-actions">
                    <form id="srv_shellHeaderSearchForm" class="shell-header-search" action="https://social.msdn.microsoft.com/search/en-us/windows" method="GET" autocomplete="off" onsubmit=" return window.msCommonShell.onSearch(this) ">
                        <label for="cli_shellHeaderSearchInput" class="sr-only">Search Microsoft</label>
                        <input id="cli_shellHeaderSearchInput" type="search" name="query" data-bi-dnt="" placeholder="" maxlength="200">

                            <input type="hidden" name="Refinement" data-bi-dnt="" value="183">

                        <button type="submit" title="Search" data-bi-dnt="">
                            <i class="shell-icon-search"></i>
                            <span class="sr-only">Search</span>
                        </button>
                        <div id="cli_searchSuggestionsContainer" class="shell-header-search-dropdown-container">
                            <div class="search-dropdown">
                                <div class="dropdown-item">
                                    <ul id="cli_searchSuggestionsResults"></ul>
                                </div>
                            </div>
                        </div>
                    </form>
                

                <dl class="shell-header-user">
                    <dt>
                        <span id="meControl"></span>
                    </dt>
                </dl>
            </div>

                <h2 class="shell-header-subtitle shell-header-dtop">
                    <span class="shell-header-vertical-bar"></span>
                    <a href="https://dev.windows.com/en-us" data-bi-name="Segment Title">Windows Dev Center</a>
                </h2>

        </div>

        <ul class="shell-header-nav" id="srv_shellHeaderNav" data-bi-area="L1" data-bi-view="Hovermenus">
                            <li id="home" class="shell-header-dropdown-label  ">
                                <a class="top-level-link-text ctl_headerNavLink" href="https://dev.windows.com/en-us" role="menuitem" data-bi-name="Home" data-bi-slot="1">

                                    Home
                                </a>
                            </li>
                            <li class="shell-header-dropdown" data-navcontainer="explore_NavContainer">
                                <h2 id="explore" class="shell-header-dropdown-label">
                                    <a href="javascript:void(0)" role="menu" data-bi-name="Explore" data-bi-slot="2">

                                        Explore
                                        <i class="shell-icon-dropdown"></i>
                                    </a>
                                </h2>





<div class="shell-header-dropdown-content " role="menu">
    <dl class="shell-header-dropdown-tab   active ">

            <dt id="explore_apps" class="shell-header-dropdown-tab-label">
                <a href="javascript:void(0)" role="menuitem" data-bi-dnt="">
                    App development
                </a>
            </dt>
            <dd class="shell-header-dropdown-tab-content" data-col="0">





        <a href="https://dev.windows.com/en-us/windows-apps" class="shell-header-dropdown-tab-spotlight" data-bi-name="Explore_Apps_TabImage">
                <img data-src="https://compass-ssl.microsoft.com/assets/6b/b8/6bb878ac-467e-4ec9-b10a-b9b6484493a2.jpg?n=explore-apps2.jpg" alt="" class="img-responsive">
                <div class="shell-header-dropdown-tab-spotlight-caption">
                            <h4>Universal Windows app development</h4>
                    
                            <p>Be more than mobile, reach every Windows screen</p>
  
                </div>

        </a>



            </dd>

    </dl>
    <dl class="shell-header-dropdown-tab    ">

            <dt id="explore_games" class="shell-header-dropdown-tab-label">
                <a href="javascript:void(0)" role="menuitem" data-bi-dnt="">
                    Game development
                </a>
            </dt>
            <dd class="shell-header-dropdown-tab-content" data-col="0">





        <a href="https://dev.windows.com/en-us/games" class="shell-header-dropdown-tab-spotlight" data-bi-name="Explore_Games_TabImage">
                <img data-src="https://compass-ssl.microsoft.com/assets/ca/80/ca809819-432a-4778-a713-0e9e94ba1481.jpg?n=explore-games.jpg" alt="" class="img-responsive">
                <div class="shell-header-dropdown-tab-spotlight-caption">
                            <h4>Create games on Windows 10</h4>
                    
                            <p>Reach millions of players across phone, PC, and Xbox One</p>
  
                </div>

        </a>



            </dd>

    </dl>
    <dl class="shell-header-dropdown-tab    ">

            <dt id="explore_iot" class="shell-header-dropdown-tab-label">
                <a href="javascript:void(0)" role="menuitem" data-bi-dnt="">
                    Windows IoT
                </a>
            </dt>
            <dd class="shell-header-dropdown-tab-content" data-col="0">





        <a href="https://dev.windows.com/en-us/iot" class="shell-header-dropdown-tab-spotlight" data-bi-name="Explore_IoT_TabImage">
                <img data-src="https://compass-ssl.microsoft.com/assets/14/0c/140c526f-ad9d-4372-9c00-7b6cd39993f5.jpg?n=explore-iot.jpg" alt="" class="img-responsive">
                <div class="shell-header-dropdown-tab-spotlight-caption">
                            <h4>Build what matters most to you</h4>
                    
                            <p>The Internet of your things</p>
  
                </div>

        </a>



            </dd>

    </dl>
    <dl class="shell-header-dropdown-tab    ">

            <dt id="explore_cortana" class="shell-header-dropdown-tab-label">
                <a href="javascript:void(0)" role="menuitem" data-bi-dnt="">
                    Cortana
                </a>
            </dt>
            <dd class="shell-header-dropdown-tab-content" data-col="0">





        <a href="https://dev.windows.com/en-us/cortana" class="shell-header-dropdown-tab-spotlight" data-bi-name="Explore_Cortana_TabImage">
                <img data-src="https://compass-ssl.microsoft.com/assets/a0/de/a0de749a-9103-49cd-8c79-ec9c939ea6c6.jpg?n=explore-cortana.jpg" alt="" class="img-responsive">
                <div class="shell-header-dropdown-tab-spotlight-caption">
                            <h4>Integrate your app with Cortana</h4>
                    
                            <p>The world's most personal digital assistant</p>
  
                </div>

        </a>



            </dd>

    </dl>
    <dl class="shell-header-dropdown-tab    ">

            <dt id="explore_spartan" class="shell-header-dropdown-tab-label">
                <a href="javascript:void(0)" role="menuitem" data-bi-dnt="">
                    Web development
                </a>
            </dt>
            <dd class="shell-header-dropdown-tab-content" data-col="0">





        <a href="https://dev.windows.com/en-us/microsoft-edge-for-devs" class="shell-header-dropdown-tab-spotlight" data-bi-name="Explore_Spartan_TabImage">
                <img data-src="https://compass-ssl.microsoft.com/assets/a6/07/a607c651-4076-420b-9a4d-a76621839ace.jpg?n=explore-spartan.jpg" alt="" class="img-responsive">
                <div class="shell-header-dropdown-tab-spotlight-caption">
                            <h4>Web development for Microsoft Edge</h4>
                    
                            <p>Beyond browsing</p>
  
                </div>

        </a>



            </dd>

    </dl>

</div>

                            </li>
                            <li class="shell-header-dropdown" data-navcontainer="docs_NavContainer">
                                <h2 id="docs" class="shell-header-dropdown-label">
                                    <a href="javascript:void(0)" role="menu" data-bi-name="Docs" data-bi-slot="3">

                                        Docs
                                        <i class="shell-icon-dropdown"></i>
                                    </a>
                                </h2>





<div class="shell-header-dropdown-content " role="menu">
    <dl class="shell-header-dropdown-tab  shell-tab-mcol active ">

            <dt id="docs_apps" class="shell-header-dropdown-tab-label">
                <a href="javascript:void(0)" role="menuitem" data-bi-dnt="">
                    Windows apps
                </a>
            </dt>
            <dd class="shell-header-dropdown-tab-content" data-col="4">



        <ul class="shell-header-dropdown-tab-list shell-l3-group">
            <li>
                <h3>
Get started                </h3>
            </li>
                <li id="docs_apps_whatsuniversal" data-mobile="0">
                    <a href="https://msdn.microsoft.com/library/windows/apps/dn726767.aspx" role="menuitem" data-bi-name="Docs_Apps_WhatsUniversal">
                        What's a Universal Windows app?
                    </a>
                </li>
                <li id="docs_apps_setup" data-mobile="0">
                    <a href="https://msdn.microsoft.com/library/windows/apps/dn726766.aspx" role="menuitem" data-bi-name="Docs_Apps_Setup">
                        Get set up
                    </a>
                </li>
                <li id="docs_apps_signup" data-mobile="0">
                    <a href="https://msdn.microsoft.com/library/windows/apps/bg124287.aspx" role="menuitem" data-bi-name="Docs_Apps_SignUp">
                        Sign up
                    </a>
                </li>
                <li id="docs_apps_first" data-mobile="0">
                    <a href="https://msdn.microsoft.com/library/windows/apps/bg124288.aspx" role="menuitem" data-bi-name="Docs_Apps_First">
                        Your first app
                    </a>
                </li>
                <li id="docs_apps_new" data-mobile="0">
                    <a href="https://dev.windows.com/en-us/getstarted/whats-new-windows-10" role="menuitem" data-bi-name="Docs_Apps_New">
                        New for Windows 10
                    </a>
                </li>
                <li id="docs_apps_all" data-mobile="1">
                    <a href="https://dev.windows.com/en-us/getstarted" role="menuitem" data-bi-name="Docs_Apps_All">
                        All Get started &gt;
                    </a>
                </li>

        </ul>
        <ul class="shell-header-dropdown-tab-list shell-l3-group">
            <li>
                <h3>
Design                </h3>
            </li>
                <li id="docs_apps_basics" data-mobile="0">
                    <a href="https://dev.windows.com/en-us/design/design-basics" role="menuitem" data-bi-name="Docs_Apps_Basics">
                        Basics
                    </a>
                </li>
                <li id="docs_apps_guidelines" data-mobile="0">
                    <a href="https://msdn.microsoft.com/library/windows/apps/hh465424.aspx" role="menuitem" data-bi-name="Docs_Apps_Guidelines">
                        Guidelines
                    </a>
                </li>
                <li id="docs_apps_downloads" data-mobile="0">
                    <a href="https://dev.windows.com/en-us/design/assets" role="menuitem" data-bi-name="Docs_Apps_Downloads">
                        Downloads
                    </a>
                </li>
                <li id="docs_apps_alldesign" data-mobile="1">
                    <a href="https://dev.windows.com/en-us/design" role="menuitem" data-bi-name="Docs_Apps_Alldesign">
                        All Design &gt;
                    </a>
                </li>

        </ul>
        <ul class="shell-header-dropdown-tab-list shell-l3-group">
            <li>
                <h3>
Develop                </h3>
            </li>
                <li id="docs_apps_howguides" data-mobile="0">
                    <a href="https://msdn.microsoft.com/library/windows/apps/xaml/mt244352.aspx" role="menuitem" data-bi-name="Docs_Apps_Howguides">
                        How-to guides
                    </a>
                </li>
                <li id="docs_apps_apireference" data-mobile="0">
                    <a href="https://msdn.microsoft.com/library/windows/apps/bg124285.aspx" role="menuitem" data-bi-name="Docs_Apps_Apireference">
                        API reference
                    </a>
                </li>
                <li id="docs_apps_services" data-mobile="0">
                    <a href="https://dev.windows.com/en-us/develop/microsoft-services" role="menuitem" data-bi-name="Docs_Apps_Services">
                        Services
                    </a>
                </li>
                <li id="docs_apps_win8_guides" data-mobile="0">
                    <a href="https://msdn.microsoft.com/library/windows/apps/mt244353.aspx" role="menuitem" data-bi-name="Docs_Apps_Win8_Guides">
                        Windows 8.x guides
                    </a>
                </li>
                <li id="docs_apps_wp_sl8_guides" data-mobile="0">
                    <a href="https://msdn.microsoft.com/library/windows/apps/ff402535(v=vs.105).aspx" role="menuitem" data-bi-name="Docs_Apps_WP_SL8_Guides">
                        Windows Phone Silverlight 8.x guides
                    </a>
                </li>
                <li id="docs_apps_alldevelop" data-mobile="1">
                    <a href="https://dev.windows.com/en-us/develop" role="menuitem" data-bi-name="Docs_Apps_Alldevelop">
                        All Develop &gt;
                    </a>
                </li>

        </ul>
        <ul class="shell-header-dropdown-tab-list shell-l3-group">
            <li>
                <h3>
Publish                </h3>
            </li>
                <li id="docs_apps_submitapp" data-mobile="0">
                    <a href="https://msdn.microsoft.com/library/windows/apps/hh694062.aspx" role="menuitem" data-bi-name="Docs_Apps_Submitapp">
                        Submit your app
                    </a>
                </li>
                <li id="docs_apps_promoteandengage" data-mobile="0">
                    <a href="https://msdn.microsoft.com/library/windows/apps/mt148526.aspx" role="menuitem" data-bi-name="Docs_Apps_Promoteandengage">
                        Promote and engage
                    </a>
                </li>
                <li id="docs_apps_viewanalytics" data-mobile="0">
                    <a href="https://msdn.microsoft.com/library/windows/apps/mt148522.aspx" role="menuitem" data-bi-name="Docs_Apps_Viewanalytics">
                        View analytics
                    </a>
                </li>
                <li id="docs_apps_storepolicies" data-mobile="0">
                    <a href="https://msdn.microsoft.com/library/windows/apps/dn764944.aspx" role="menuitem" data-bi-name="Docs_Apps_Storepolicies">
                        Store Policies
                    </a>
                </li>
                <li id="docs_apps_allpublish" data-mobile="1">
                    <a href="https://dev.windows.com/en-us/publish" role="menuitem" data-bi-name="Docs_Apps_Allpublish">
                        All Publish &gt;
                    </a>
                </li>

        </ul>



            </dd>

    </dl>
    <dl class="shell-header-dropdown-tab  shell-tab-mcol  ">

            <dt id="docs_games" class="shell-header-dropdown-tab-label">
                <a href="javascript:void(0)" role="menuitem" data-bi-dnt="">
                    Games
                </a>
            </dt>
            <dd class="shell-header-dropdown-tab-content" data-col="4">



        <ul class="shell-header-dropdown-tab-list shell-l3-group">
            <li>
                <h3>
Get started                </h3>
            </li>
                <li id="docs_games_getsetup" data-mobile="0">
                    <a href="https://msdn.microsoft.com/library/windows/apps/dn726766.aspx" role="menuitem" data-bi-name="Docs_Games_GetSetUp">
                        Get set up
                    </a>
                </li>
                <li id="docs_games_windowsuniversalappplatform" data-mobile="0">
                    <a href="https://dev.windows.com/en-us/develop" role="menuitem" data-bi-name="Docs_Games_WindowsUniversalAppPlatform">
                        Universal Windows Platform (UWP)
                    </a>
                </li>
                <li id="docs_games_choosetechnology" data-mobile="0">
                    <a href="https://dev.windows.com/en-us/games/technology" role="menuitem" data-bi-name="Docs_Games_ChooseTechnology">
                        Choose a technology
                    </a>
                </li>
                <li id="docs_games_signup" data-mobile="0">
                    <a href="https://msdn.microsoft.com/library/windows/apps/bg124287.aspx" role="menuitem" data-bi-name="Docs_Games_SignUp">
                        Sign up
                    </a>
                </li>
                <li id="docs_games_all" data-mobile="1">
                    <a href="https://dev.windows.com/en-us/games/getstarted" role="menuitem" data-bi-name="Docs_Games_All">
                        All Get started &gt;
                    </a>
                </li>

        </ul>
        <ul class="shell-header-dropdown-tab-list shell-l3-group">
            <li>
                <h3>
Design                </h3>
            </li>
                <li id="docs_games_appdesignbasics" data-mobile="0">
                    <a href="https://dev.windows.com/en-us/design/design-basics" role="menuitem" data-bi-name="Docs_Games_AppDesignBasics">
                        App design basics
                    </a>
                </li>
                <li id="docs_games_appdesignguidelines" data-mobile="0">
                    <a href="https://msdn.microsoft.com/library/windows/apps/hh465424.aspx" role="menuitem" data-bi-name="Docs_Games_AppDesignGuidelines">
                        App design guidelines
                    </a>
                </li>
                <li id="docs_games_all" data-mobile="1">
                    <a href="https://dev.windows.com/en-us/games/design" role="menuitem" data-bi-name="Docs_Games_All">
                        All Design &gt;
                    </a>
                </li>

        </ul>
        <ul class="shell-header-dropdown-tab-list shell-l3-group">
            <li>
                <h3>
Develop                </h3>
            </li>
                <li id="docs_games_developinggames" data-mobile="0">
                    <a href="https://msdn.microsoft.com/library/windows/apps/mt228375.aspx" role="menuitem" data-bi-name="Docs_Games_DevelopingGames">
                        Developing games
                    </a>
                </li>
                <li id="docs_games_graphicsandgaming" data-mobile="0">
                    <a href="https://msdn.microsoft.com/library/windows/desktop/ee663279" role="menuitem" data-bi-name="Docs_Games_GraphicsAndGaming">
                        Graphics and gaming
                    </a>
                </li>
                <li id="docs_games_direct3d12graphics" data-mobile="0">
                    <a href="https://msdn.microsoft.com/library/windows/desktop/dn903821" role="menuitem" data-bi-name="Docs_Games_Direct3D12Graphics">
                        Direct3D 12 graphics
                    </a>
                </li>
                <li id="docs_games_developwindowsapps" data-mobile="0">
                    <a href="https://dev.windows.com/en-us/develop" role="menuitem" data-bi-name="Docs_Games_DevelopWindowsApps">
                        Develop Windows apps
                    </a>
                </li>
                <li id="docs_games_windowsappreference" data-mobile="0">
                    <a href="https://msdn.microsoft.com/library/windows/apps/br211369" role="menuitem" data-bi-name="Docs_Games_WindowsAppReference">
                        Windows app reference
                    </a>
                </li>
                <li id="docs_games_alldevelop" data-mobile="1">
                    <a href="https://dev.windows.com/en-us/games/develop" role="menuitem" data-bi-name="Docs_Games_AllDevelop">
                        All Develop &gt;
                    </a>
                </li>

        </ul>
        <ul class="shell-header-dropdown-tab-list shell-l3-group">
            <li>
                <h3>
Publish                </h3>
            </li>
                <li id="docs_games_publishwindowsapps" data-mobile="0">
                    <a href="https://dev.windows.com/en-us/publish" role="menuitem" data-bi-name="Docs_Games_PublishWindowsApps">
                        Publish Windows apps
                    </a>
                </li>
                <li id="docs_games_id@xbox" data-mobile="0">
                    <a href="http://www.xbox.com/Developers/id" role="menuitem" data-bi-name="Docs_Games_ID@Xbox">
                        ID@Xbox
                    </a>
                </li>
                <li id="docs_games_all" data-mobile="1">
                    <a href="https://dev.windows.com/en-us/games/publish" role="menuitem" data-bi-name="Docs_Games_All">
                        All Publish &gt;
                    </a>
                </li>

        </ul>



            </dd>

    </dl>
    <dl class="shell-header-dropdown-tab  shell-tab-mcol  ">

            <dt id="docs_desktop" class="shell-header-dropdown-tab-label">
                <a href="javascript:void(0)" role="menuitem" data-bi-dnt="">
                    Desktop applications
                </a>
            </dt>
            <dd class="shell-header-dropdown-tab-content" data-col="4">



        <ul class="shell-header-dropdown-tab-list shell-l3-group">
            <li>
                <h3>
Get started                </h3>
            </li>
                <li id="docs_desktop_technology" data-mobile="0">
                    <a href="https://msdn.microsoft.com/library/windows/desktop/dn614993.aspx" role="menuitem" data-bi-name="Docs_Desktop_Technology">
                        Choose your technology
                    </a>
                </li>
                <li id="docs_desktop_whatnew" data-mobile="0">
                    <a href="https://msdn.microsoft.com/library/windows/desktop/hh848361.aspx" role="menuitem" data-bi-name="Docs_Desktop_Whatnew">
                        What’s new 
                    </a>
                </li>
                <li id="docs_desktop_prog" data-mobile="0">
                    <a href="https://msdn.microsoft.com/windows/desktop/ee663266.aspx" role="menuitem" data-bi-name="Docs_Desktop_Prog">
                        Desktop programming
                    </a>
                </li>
                <li id="docs_desktop_allgetstarted" data-mobile="1">
                    <a href="https://dev.windows.com/en-us/desktop/getstarted" role="menuitem" data-bi-name="Docs_Desktop_Allgetstarted">
                        All Get started &gt;
                    </a>
                </li>

        </ul>
        <ul class="shell-header-dropdown-tab-list shell-l3-group">
            <li>
                <h3>
Design                </h3>
            </li>
                <li id="docs_desktop_principles" data-mobile="0">
                    <a href="https://msdn.microsoft.com/library/windows/desktop/dn742446.aspx" role="menuitem" data-bi-name="Docs_Desktop_principles">
                        Design principles
                    </a>
                </li>
                <li id="docs_desktop_guidelines" data-mobile="0">
                    <a href="https://msdn.microsoft.com/library/windows/desktop/dn688964.aspx" role="menuitem" data-bi-name="Docs_Desktop_Guidelines">
                        Guidelines
                    </a>
                </li>
                <li id="docs_desktop_visual" data-mobile="0">
                    <a href="https://msdn.microsoft.com/library/windows/desktop/dn688966.aspx" role="menuitem" data-bi-name="Docs_Desktop_Visual">
                        Visual index
                    </a>
                </li>
                <li id="docs_desktop_alldesign" data-mobile="1">
                    <a href="https://dev.windows.com/en-us/desktop/design" role="menuitem" data-bi-name="Docs_Desktop_Alldesign">
                        All Design &gt;
                    </a>
                </li>

        </ul>
        <ul class="shell-header-dropdown-tab-list shell-l3-group">
            <li>
                <h3>
Develop                </h3>
            </li>
                <li id="docs_desktop_desktoptech" data-mobile="0">
                    <a href="https://msdn.microsoft.com/library/windows/desktop/bg126469.aspx" role="menuitem" data-bi-name="Docs_Desktop_Desktoptech">
                        Desktop technologies
                    </a>
                </li>
                <li id="docs_desktop_serversystem" data-mobile="0">
                    <a href="https://msdn.microsoft.com/library/windows/desktop/bg125390.aspx" role="menuitem" data-bi-name="Docs_Desktop_Serversystem">
                        Server and system
                    </a>
                </li>
                <li id="docs_desktop_apireference" data-mobile="0">
                    <a href="https://msdn.microsoft.com/library/windows/desktop/hh920508.aspx" role="menuitem" data-bi-name="Docs_Desktop_Apireference">
                        API reference
                    </a>
                </li>
                <li id="docs_desktop_certify" data-mobile="0">
                    <a href="https://msdn.microsoft.com/windows/desktop/jj134964.aspx" role="menuitem" data-bi-name="Docs_Desktop_Certify">
                        Certify
                    </a>
                </li>
                <li id="docs_desktop_alldevelop" data-mobile="1">
                    <a href="https://dev.windows.com/en-us/desktop/develop" role="menuitem" data-bi-name="Docs_Desktop_Alldevelop">
                        All Develop &gt;
                    </a>
                </li>

        </ul>
        <ul class="shell-header-dropdown-tab-list shell-l3-group">
            <li>
                <h3>
Test and deploy                </h3>
            </li>
                <li id="docs_desktop_deploy" data-mobile="0">
                    <a href="http://msdn.microsoft.com/windows/desktop/dn640662.aspx" role="menuitem" data-bi-name="Docs_Desktop_Deploy">
                        Deploy
                    </a>
                </li>
                <li id="docs_desktop_debug" data-mobile="0">
                    <a href="http://msdn.microsoft.com/windows/desktop/dn640617.aspx" role="menuitem" data-bi-name="Docs_Desktop_Debug">
                        Debug
                    </a>
                </li>
                <li id="docs_desktop_instrument" data-mobile="0">
                    <a href="http://msdn.microsoft.com/windows/desktop/dn640663.aspx" role="menuitem" data-bi-name="Docs_Desktop_Instrument">
                        Instrument
                    </a>
                </li>
                <li id="docs_desktop_tools" data-mobile="0">
                    <a href="http://msdn.microsoft.com/windows/desktop/dn640664.aspx" role="menuitem" data-bi-name="Docs_Desktop_Tools">
                        Tools
                    </a>
                </li>
                <li id="docs_desktop_alltest" data-mobile="1">
                    <a href="https://dev.windows.com/en-us/desktop/test-deploy" role="menuitem" data-bi-name="Docs_Desktop_Alltest">
                        All Test &gt;
                    </a>
                </li>

        </ul>



            </dd>

    </dl>
    <dl class="shell-header-dropdown-tab  shell-tab-mcol  ">

            <dt id="docs_iot" class="shell-header-dropdown-tab-label">
                <a href="javascript:void(0)" role="menuitem" data-bi-dnt="">
                    Windows IoT
                </a>
            </dt>
            <dd class="shell-header-dropdown-tab-content" data-col="4">



        <ul class="shell-header-dropdown-tab-list shell-l3-group">
            <li>
                <h3>
Get started                </h3>
            </li>
                <li id="docs_iot_platformoverview" data-mobile="0">
                    <a href="http://go.microsoft.com/fwlink/p/?linkid=532975" role="menuitem" data-bi-name="Docs_IoT_Platformoverview">
                        Platform overview
                    </a>
                </li>
                <li id="docs_iot_register" data-mobile="0">
                    <a href="http://go.microsoft.com/fwlink/p/?linkid=532947" role="menuitem" data-bi-name="Docs_IoT_Register">
                        Register
                    </a>
                </li>
                <li id="docs_iot_setup" data-mobile="0">
                    <a href="http://go.microsoft.com/fwlink/p/?linkid=532974" role="menuitem" data-bi-name="Docs_IoT_Setup">
                        Set up your device
                    </a>
                </li>
                <li id="docs_iot_firstapp" data-mobile="0">
                    <a href="http://go.microsoft.com/fwlink/p/?linkid=532945" role="menuitem" data-bi-name="Docs_IoT_FirstApp">
                        Write your first app
                    </a>
                </li>
                <li id="docs_iot_all" data-mobile="1">
                    <a href="http://go.microsoft.com/fwlink/p/?linkid=532957" role="menuitem" data-bi-name="Docs_IoT_All">
                        All Get started &gt;
                    </a>
                </li>

        </ul>
        <ul class="shell-header-dropdown-tab-list shell-l3-group">
            <li>
                <h3>
Develop                </h3>
            </li>
                <li id="docs_iot_atbuild" data-mobile="0">
                    <a href="http://go.microsoft.com/fwlink/p/?linkid=532963" role="menuitem" data-bi-name="Docs_IoT_AtBuild">
                        Windows IoT at Build 2015
                    </a>
                </li>
                <li id="docs_iot_codesamples" data-mobile="0">
                    <a href="http://go.microsoft.com/fwlink/p/?linkid=532976" role="menuitem" data-bi-name="Docs_IoT_CodeSamples">
                        Code samples
                    </a>
                </li>
                <li id="docs_iot_faq" data-mobile="0">
                    <a href="http://go.microsoft.com/fwlink/p/?linkid=532965" role="menuitem" data-bi-name="Docs_IoT_Faq">
                        FAQ
                    </a>
                </li>
                <li id="docs_iot_all" data-mobile="1">
                    <a href="http://go.microsoft.com/fwlink/p/?linkid=532961" role="menuitem" data-bi-name="Docs_IoT_All">
                        All Develop &gt;
                    </a>
                </li>

        </ul>
        <ul class="shell-header-dropdown-tab-list shell-l3-group">
            <li>
                <h3>
Learn more                </h3>
            </li>
                <li id="docs_iot_projectgallery" data-mobile="0">
                    <a href="http://go.microsoft.com/fwlink/p/?linkid=532977" role="menuitem" data-bi-name="Docs_IoT_ProjectGallery">
                        IoT Project gallery
                    </a>
                </li>
                <li id="docs_iot_downloads" data-mobile="0">
                    <a href="http://go.microsoft.com/fwlink/p/?LinkID=532967" role="menuitem" data-bi-name="Docs_Iot_Downloads">
                        Downloads
                    </a>
                </li>
                <li id="docs_iot_community" data-mobile="1">
                    <a href="http://go.microsoft.com/fwlink/p/?LinkID=532968" role="menuitem" data-bi-name="Docs_Iot_Community">
                        Community
                    </a>
                </li>

        </ul>
        <ul class="shell-header-dropdown-tab-list shell-l3-group">
            <li>
                <h3>
IoT Hardware                </h3>
            </li>
                <li id="docs_iot_getstartedguide" data-mobile="0">
                    <a href="http://go.microsoft.com/fwlink/p/?linkid=532966" role="menuitem" data-bi-name="Docs_IoT_GetStartedGuide">
                        IoT Getting started guide
                    </a>
                </li>
                <li id="docs_iot_hardware" data-mobile="1">
                    <a href="http://go.microsoft.com/fwlink/p/?linkid=532948" role="menuitem" data-bi-name="Docs_IoT_Hardware">
                        IoT Hardware &gt;
                    </a>
                </li>

        </ul>



            </dd>

    </dl>

</div>

                            </li>
                            <li id="downloads" class="shell-header-dropdown-label  ">
                                <a class="top-level-link-text ctl_headerNavLink" href="https://dev.windows.com/en-us/downloads" role="menuitem" data-bi-name="Downloads" data-bi-slot="4">

                                    Downloads
                                </a>
                            </li>
                            <li id="samples" class="shell-header-dropdown-label  ">
                                <a class="top-level-link-text ctl_headerNavLink" href="https://dev.windows.com/en-us/samples" role="menuitem" data-bi-name="Samples" data-bi-slot="5">

                                    Samples
                                </a>
                            </li>
                            <li id="community" class="shell-header-dropdown-label  ">
                                <a class="top-level-link-text ctl_headerNavLink" href="https://dev.windows.com/community" role="menuitem" data-bi-name="Community" data-bi-slot="6">

                                    Community
                                </a>
                            </li>
                            <li id="programs" class="shell-header-dropdown-label  ">
                                <a class="top-level-link-text ctl_headerNavLink" href="https://dev.windows.com/en-us/programs" role="menuitem" data-bi-name="Programs" data-bi-slot="7">

                                    Programs
                                </a>
                            </li>
                            <li id="dashboard" class="shell-header-dropdown-label  rightAlignedMenu">
                                <a class="top-level-link-text ctl_headerNavLink" href="https://dev.windows.com/overview?from=UHF" role="menuitem" data-bi-name="Dashboard" data-bi-slot="8">

                                    Dashboard
                                </a>
                            </li>

        </ul>


    </div>
</div>



<script type="text/javascript">

    var shellInitOptions = {
        lcaDisclaimerEnabled: false,
        suggestedProductTitle : 'Suggested products'
    };

    
    var meControlInitOptions = {
        containerId: 'meControl',
        custom: {chevHtml:'<i class="msame_chev_uhf shell-icon-dropdown"></i>'},

        
            
        market: 'en-US',
        

            
        mobileBreakpoints:
    {
        shortHeader: 1084,
        mobile: 540
        },
        

        rpData:
        {
            msaInfo:
                {
                        
                    signInUrl: '/en-us/store/signin',
                    signOutUrl: '/en-us/store/signout',
                    accountSettingsUrl: 'https://account.microsoft.com/',
                    switchUrl: '',
                    meUrl: 'https://login.live.com/me.srf?wa=wsignin1.0',
                    isSupported: true
                    
                },
            aadInfo:
                {
                },
            preferredIdp: 'msa',
        },
        signInText: 'Sign In',
        signOutText: 'Sign Out'
    };
</script>




    </div>

    <div class="default-main">
        <div class="row">
            <div class="default-max-width">
                <div>
                    <nav class="navbar" id="subNav">
    <div class="l2-nav">
        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
            <span class="sr-only">Toggle navigation</span>
            <span class="glyphicon glyphicon-menu-down"></span>
        </button>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav nav-justified">
                <li role="presentation"><a href="http://go.microsoft.com/fwlink/p/?LinkID=534186">IoT Home</a></li>
                <li role="presentation"><a href="https://ms-iot.github.io/content/en-US/GetStarted.htm">Get Started</a></li>
                <li role="presentation"><a href="http://microsoft.hackster.io/en-US">Projects</a></li>
                <li role="presentation"><a href="https://ms-iot.github.io/content/en-US/win10/StartCoding.htm">Docs and samples</a></li>
                <li role="presentation"><a href="https://ms-iot.github.io/content/en-US/Faqs.htm">FAQs</a></li>
                <li role="presentation"><a href="https://ms-iot.github.io/content/en-US/Downloads.htm">Downloads</a></li>
                <li role="presentation"><a href="https://ms-iot.github.io/content/en-US/win10/SupportedInterfaces.htm">Hardware</a></li>
                <li role="presentation"><a href="https://ms-iot.github.io/content/en-US/Community.htm">Community</a></li>
            </ul>
        </div>
    </div>
</nav>

                </div>
                <div class="content-container col-md-12">
                    <h2 id="spi-display-sample">SPI Display Sample</h2>

<p>In this sample, we interface a SPI based <a href="http://www.adafruit.com/product/938" target="_blank">OLED display</a> to your Raspberry Pi 2, MinnowBoard Max, or DragonBoard 410c. We then create an app that lets us write lines of text to the display. Step-by-step instructions are provided,
so no background knowledge of SPI is needed. However, if you want to learn more, SparkFun provides a great <a href="https://learn.sparkfun.com/tutorials/serial-peripheral-interface-spi" target="_blank">tutorial on SPI</a>.</p>

<p>This is a headed sample.  To better understand what headed mode is and how to configure your device to be headed, follow the instructions <a href="https://ms-iot.github.io/content/en-US/win10/HeadlessMode.htm">here</a>.</p>

<h3 id="load-the-project-in-visual-studio">Load the project in Visual Studio</h3>

<p>You can find the source code for this sample by downloading a zip of all of our samples <a href="https://github.com/ms-iot/samples/archive/develop.zip">here</a> and navigating to the <code>samples-develop\SPIDisplay</code>.  Make a copy of the folder on your disk and open the project from Visual Studio. 
Note that this app requires a device with a physical SPI port and will not work if running in an emulated environment.</p>

<h3 id="connect-the-spi-display-to-your-device">Connect the SPI Display to your device</h3>

<p>First, we need to wire up the display to your device. You’ll need a few components:</p>

<ul>
  <li>
    <p><a name="SPI_Display"></a>a <a href="http://www.adafruit.com/product/938" target="_blank">Monochrome 1.3” 128x64 OLED graphic display</a> from Adafruit with pin headers soldered on</p>
  </li>
  <li>
    <p>a breadboard and several male-to-female connector wires (Raspberry Pi 2 or MinnowBoard Max) or male-to-male connector wires (DragonBoard 410c)</p>
  </li>
  <li>
    <p><a name="SPI_Display"></a>If you are using a DragonBoard 410c, you’ll also need a <a href="http://www.adafruit.com/products/395">8-channel Bi-directional Logic Level Converter</a> from Adafruit with pin headers soldered on</p>
  </li>
</ul>

<p>Visit the <strong>Raspberry Pi 2, MinnowBoard Max, or DragonBoard 410c</strong> sections below depending on which device you have:</p>

<p><img src="./Windows IoT - SPI Display Sample_files/components.png" alt="Electrical Components" class="img-responsive"></p>

<h4 id="raspberry-pi-2">Raspberry Pi 2</h4>
<p>For the Raspberry Pi 2, we need to hook up power, ground, SPI, and a few GPIO pins to the OLED display. For additional information on the Raspberry Pi 2 pins, visit the <a href="https://ms-iot.github.io/content/en-US/win10/samples/PinMappingsRPi2.htm">Raspberry Pi 2 pin mapping page</a></p>

<p><strong>Note: Make sure to power off the RPi2 when connecting your circuit. This is good practice to reduce the chance of an accidental short circuit during construction.</strong></p>

<p>The OLED display has 8 IO pins, connect them as follows:</p>

<ol>
  <li><strong>DATA:</strong>  Connect to MOSI on the RPi2 (Pin 19). This is the SPI master data out line.</li>
  <li><strong>CLK:</strong>     Connect to SCLK on the RPi2 (Pin 23). This is the SPI clock line.</li>
  <li><strong>SA0/DC:</strong>   Connect to GPIO 22 on the RPi2 (Pin 15). This is the Data/Command line for the display. (See the <a href="http://www.adafruit.com/datasheets/SSD1306.pdf" target="_blank">datasheet</a> for more information about the display pin functions)</li>
  <li><strong>RST:</strong> Connect to GPIO 23 on the RPi2 (Pin 16). This is the hardware Reset line for the display. (See the <a href="http://www.adafruit.com/datasheets/SSD1306.pdf" target="_blank">datasheet</a> for more information about the display pin functions)</li>
  <li><strong>CS:</strong> Connect to CE0 on the RPi2 (Pin 24). This is the SPI chip select line.</li>
  <li><strong>3V3:</strong>  Leave unconnected. The display has its own on-board power regulator which provides it with 3.3V</li>
  <li><strong>VIN:</strong>  Connect 5V the RPi2 (Pin 2).</li>
  <li><strong>GND:</strong>  Connect to ground on the RPi2 (Pin 6).</li>
</ol>

<p>Here are the connections shown on a breadboard:</p>

<p><img src="./Windows IoT - SPI Display Sample_files/breadboard_assembled_rpi2.png" alt="Breadboard connections" class="img-responsive"></p>

<p><sub><em>Image made with <a href="http://fritzing.org/">Fritzing</a></em></sub></p>

<p>Here are the schematics:</p>

<p><img src="./Windows IoT - SPI Display Sample_files/schematics_rpi2.png" alt="SPI schematics" class="img-responsive"></p>

<h4 id="minnowboard-max">MinnowBoard Max</h4>
<p>For the MinnowBoard Max, we need to hook up power, ground, SPI, and a few GPIO pins to the OLED display. See the <a href="https://ms-iot.github.io/content/en-US/win10/samples/PinMappingsMBM.htm">MBM pin mapping page</a> for more details on the MBM IO pins.</p>

<p><strong>Note: Make sure to power off the MBM when connecting your circuit. This is good practice to reduce the chance of an accidental short circuit during construction.</strong></p>

<p>The OLED display has 8 IO pins, connect them as follows:</p>

<ol>
  <li><strong>DATA:</strong>  Connect to MOSI on the MBM (Pin 9). This is the SPI master data out line.</li>
  <li><strong>CLK:</strong>     Connect to SCLK on the MBM (Pin 11). This is the SPI clock line.</li>
  <li><strong>SA0/DC:</strong>   Connect to GPIO 3 on the MBM (Pin 14). This is the Data/Command line for the display. (See the <a href="http://www.adafruit.com/datasheets/SSD1306.pdf" target="_blank">datasheet</a> for more information about the display pin functions)</li>
  <li><strong>RST:</strong> Connect to GPIO 4 on the MBM (Pin 16). This is the hardware Reset line for the display. (See the <a href="http://www.adafruit.com/datasheets/SSD1306.pdf" target="_blank">datasheet</a> for more information about the display pin functions)</li>
  <li><strong>CS:</strong> Connect to CS1 on the MBM (Pin 5). This is the SPI chip select line.</li>
  <li><strong>3V3:</strong>  Leave unconnected. The display has its own on-board power regulator which provides it with 3.3V</li>
  <li><strong>VIN:</strong>  Connect 5V the MBM (Pin ).</li>
  <li><strong>GND:</strong>  Connect to ground on the MBM (Pin 2).</li>
</ol>

<p>Here are the connections shown on a breadboard:</p>

<p><img src="./Windows IoT - SPI Display Sample_files/breadboard_assembled_mbm.png" alt="Breadboard connections" class="img-responsive"></p>

<p><sub><em>Image made with <a href="http://fritzing.org/">Fritzing</a></em></sub></p>

<p>Here are the schematics:</p>

<p><img src="./Windows IoT - SPI Display Sample_files/schematics_mbm.png" alt="SPI schematics" class="img-responsive"></p>

<h4 id="dragonboard-410c">DragonBoard 410c</h4>

<p>For the DragonBoard 410c, connections need to be made from the power, ground, SPI, and a couple of GPIO connections of the single board computer to the OLED display.</p>

<p><strong>Note:  Make sure to power off the DragonBoard 410c when connecting your circuit.  This is good practice to reduce the change of an accidental short circuit during contruction.</strong></p>

<p>The OLED display has 8 IO pins that are connected to the logic level converter as follows:</p>

<ol>
  <li><strong>DATA:</strong>    Connect to pin B5.  This is the SPI master data out line.</li>
  <li><strong>CLK:</strong>     Connect to pin B4.  This is the SPI clock line.</li>
  <li><strong>SA0/DC:</strong>  Connect to pin B3.  This is the data / command line for the display.</li>
  <li><strong>RST:</strong>     Connect to pin B2.  This is the hardware reset line for the display.</li>
  <li><strong>CS:</strong>      Connect to pin B1.  This is the SPI chip select line.</li>
  <li><strong>3V3:</strong>     This connection is <em>unused</em>.</li>
  <li><strong>VIN:</strong>     Connect to VCCB.</li>
  <li><strong>GND:</strong>     Connect to GND.</li>
</ol>

<p>The logic level converter is connected to the DragonBoard as follows:</p>

<ol>
  <li><strong>A5:</strong>     Connect to pin 14 (SPI0 MOSI).  </li>
  <li><strong>A4:</strong>     Connect to pin 8 (SPI0 CLK).  </li>
  <li><strong>A3:</strong>     Connect to pin 24 (GPIO 12).  </li>
  <li><strong>A2:</strong>     Connect to pin 26 (GPIO 69).  </li>
  <li><strong>A1:</strong>     Connect to pin 12 (SPI0 CS N).  </li>
  <li><strong>VCCA:</strong>   Connect to pin 35 (1.8V PWR).</li>
  <li><strong>VCCB:</strong>   Connect to pin 37 (5V PWR).</li>
  <li><strong>GND:</strong>    Connect to pin 40 (GND).</li>
</ol>

<p>The following diagram shows what your breadboard might resemble with the circuit assembled:</p>

<p><img src="./Windows IoT - SPI Display Sample_files/breadboard_assembled_db410c.png" alt="DragonBoard SPI Display Breadboard" class="img-responsive"></p>

<p>A schematic for the circuit is:</p>

<p><img src="./Windows IoT - SPI Display Sample_files/schematics_db410c.png" alt="DragonBoard SPI Display Schematic" class="img-responsive"></p>

<h3 id="deploy-and-run-the-app">Deploy and run the app</h3>

<p>When everything is set up, power your device back on, and open up the sample app in Visual Studio. Configure the code depending on which device you are using.</p>

<div class="highlight"><pre><code class="language-c#" data-lang="c#"><span class="k">public</span> <span class="k">sealed</span> <span class="k">partial</span> <span class="k">class</span> <span class="nc">MainPage</span> <span class="p">:</span> <span class="n">Page</span>
<span class="p">{</span>
        <span class="cm">/* Important! Uncomment the code below corresponding to your target device */</span>

        <span class="cm">/* Uncomment for MinnowBoard Max */</span>
        <span class="c1">//private const string SPI_CONTROLLER_NAME = "SPI0";  /* For MinnowBoard Max, use SPI0                            */</span>
        <span class="c1">//private const Int32 SPI_CHIP_SELECT_LINE = 0;       /* Line 0 maps to physical pin number 5 on the MBM          */</span>
        <span class="c1">//private const Int32 DATA_COMMAND_PIN = 3;           /* We use GPIO 3 since it's conveniently near the SPI pins  */</span>
        <span class="c1">//private const Int32 RESET_PIN = 4;                  /* We use GPIO 4 since it's conveniently near the SPI pins  */</span>

        <span class="cm">/* Uncomment for Raspberry Pi 2 */</span>
        <span class="c1">//private const string SPI_CONTROLLER_NAME = "SPI0";  /* For Raspberry Pi 2, use SPI0                             */</span>
        <span class="c1">//private const Int32 SPI_CHIP_SELECT_LINE = 0;       /* Line 0 maps to physical pin number 24 on the Rpi2        */</span>
        <span class="c1">//private const Int32 DATA_COMMAND_PIN = 22;          /* We use GPIO 22 since it's conveniently near the SPI pins */</span>
        <span class="c1">//private const Int32 RESET_PIN = 23;                 /* We use GPIO 23 since it's conveniently near the SPI pins */</span>

        <span class="cm">/* Uncomment for DragonBoard 410c */</span>
        <span class="c1">//private const string SPI_CONTROLLER_NAME = "SPI0";  /* For DragonBoard, use SPI0                                */</span>
        <span class="c1">//private const Int32 SPI_CHIP_SELECT_LINE = 0;       /* Line 0 maps to physical pin number 12 on the DragonBoard */</span>
        <span class="c1">//private const Int32 DATA_COMMAND_PIN = 12;          /* We use GPIO 12 since it's conveniently near the SPI pins */</span>
        <span class="c1">//private const Int32 RESET_PIN = 69;                 /* We use GPIO 69 since it's conveniently near the SPI pins */</span>
        
        <span class="c1">//...</span>
<span class="p">}</span></code></pre></div>

<p>Next, right-click on the <strong>SPIDisplay</strong> project in <strong>Solution Explorer</strong> and select <strong>“Set as StartUp Project”</strong>.
Follow the instructions to <a href="https://ms-iot.github.io/content/en-US/win10/AppDeployment.htm#csharp">setup remote debugging and deploy the app</a>. The SPIDisplay app will deploy and start, and you should see text data show up on OLED display.
 You can now type into the app and have the text mirrored on the attached OLED display.</p>

<p><img src="./Windows IoT - SPI Display Sample_files/spidisplay_screenshot.png" alt="SPI running" class="img-responsive"></p>

<p>Congratulations! You’ve connected a SPI graphics display.</p>

<h3 id="lets-look-at-the-code">Let’s look at the code</h3>
<p>The code in this sample can be split up into two main sections:</p>

<ol>
  <li>
    <p><strong>Initialization Code:</strong> This performs initializations for GPIO, SPI, and the OLED display. Setting up these prerequisites is necessary before we can send graphics data to the OLED display.</p>
  </li>
  <li>
    <p><strong>Text Display Code:</strong> This code monitors the textbox control in the UI, and waits for a user to enter text. When this happens the app converts the text into graphics data that gets sent to the display over SPI.</p>
  </li>
</ol>

<p>Let’s start by digging into the initialization code first.</p>

<h3 id="initialization-code">Initialization Code</h3>
<p>Here is the C# code for the top-level initialization function.</p>

<div class="highlight"><pre><code class="language-c#" data-lang="c#"><span class="k">using</span> <span class="nn">Windows.Devices.Enumeration</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Windows.Devices.Spi</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Windows.Devices.Gpio</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">DisplayFont</span><span class="p">;</span>

<span class="cm">/* Initialize GPIO, SPI, and the display */</span>
<span class="k">private</span> <span class="k">async</span> <span class="k">void</span> <span class="nf">InitAll</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">try</span>
    <span class="p">{</span>
        <span class="n">InitGpio</span><span class="p">();</span>             <span class="cm">/* Initialize the GPIO controller and GPIO pins */</span>
        <span class="k">await</span> <span class="nf">InitSpi</span><span class="p">();</span>        <span class="cm">/* Initialize the SPI controller                */</span>
        <span class="k">await</span> <span class="nf">InitDisplay</span><span class="p">();</span>    <span class="cm">/* Initialize the display                       */</span>
    <span class="p">}</span>
    <span class="cm">/* If initialization fails, display the exception and stop running */</span>
    <span class="k">catch</span> <span class="p">(</span><span class="n">Exception</span> <span class="n">ex</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">Text_Status</span><span class="p">.</span><span class="n">Text</span> <span class="p">=</span> <span class="s">"Exception: "</span> <span class="p">+</span> <span class="n">ex</span><span class="p">.</span><span class="n">Message</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">ex</span><span class="p">.</span><span class="n">InnerException</span> <span class="p">!=</span> <span class="k">null</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">Text_Status</span><span class="p">.</span><span class="n">Text</span> <span class="p">+=</span> <span class="s">"\nInner Exception: "</span> <span class="p">+</span> <span class="n">ex</span><span class="p">.</span><span class="n">InnerException</span><span class="p">.</span><span class="n">Message</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="cm">/* Register a handler so we update the SPI display anytime the user edits a textbox */</span>
    <span class="n">Display_TextBoxLine0</span><span class="p">.</span><span class="n">TextChanged</span> <span class="p">+=</span> <span class="n">Display_TextBox_TextChanged</span><span class="p">;</span>
    <span class="n">Display_TextBoxLine1</span><span class="p">.</span><span class="n">TextChanged</span> <span class="p">+=</span> <span class="n">Display_TextBox_TextChanged</span><span class="p">;</span>
    <span class="n">Display_TextBoxLine2</span><span class="p">.</span><span class="n">TextChanged</span> <span class="p">+=</span> <span class="n">Display_TextBox_TextChanged</span><span class="p">;</span>
    <span class="n">Display_TextBoxLine3</span><span class="p">.</span><span class="n">TextChanged</span> <span class="p">+=</span> <span class="n">Display_TextBox_TextChanged</span><span class="p">;</span>

    <span class="cm">/* Manually update the display once after initialization*/</span>
    <span class="n">DisplayTextBoxContents</span><span class="p">();</span>

    <span class="n">Text_Status</span><span class="p">.</span><span class="n">Text</span> <span class="p">=</span> <span class="s">"Status: Initialized"</span><span class="p">;</span>
<span class="p">}</span></code></pre></div>

<ul>
  <li>The SPI display requires the use of GPIO and SPI, so we initialize the following in sequence:
    <ol>
      <li>Initialize GPIO controller and pins</li>
      <li>Initialize the SPI bus</li>
      <li>Initialize the OLED SPI display</li>
    </ol>
  </li>
  <li>
    <p>If any of the initializations fail, we display an error and halt additional processing. This might occur if the display is wired incorrectly,
or if the host device does not have a SPI bus (for example, if you try to run this on a desktop Windows machine)</p>
  </li>
  <li>
    <p>Once the initializations have all completed successfully, we register the <strong>Display_TextBox_TextChanged()</strong> function for the <strong>TextChanged</strong> event on the textboxes.
This ensures that our function gets called to update the display any time the user edits text.</p>
  </li>
  <li>Finally, we make a single call to <strong>DisplayTextBoxContents()</strong> to display some default sample text on the screen when we first start up.</li>
</ul>

<p>Next, let’s take a closer look at what each of the initialization functions is doing in more detail.</p>

<h4 id="initgpio">InitGPIO()</h4>

<p>There are two pins on the SPI OLED display we need to control, the Data/Command pin and the Reset pin. To communicate with these,
we need to initialize the GPIO controller and configure the pins as outputs.</p>

<div class="highlight"><pre><code class="language-c#" data-lang="c#"><span class="cm">/* Initialize the GPIO */</span>
<span class="k">private</span> <span class="k">void</span> <span class="nf">InitGpio</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">try</span>
    <span class="p">{</span>
        <span class="n">IoController</span> <span class="p">=</span> <span class="n">GpioController</span><span class="p">.</span><span class="n">GetDefault</span><span class="p">();</span> <span class="cm">/* Get the default GPIO controller on the system */</span>

        <span class="cm">/* Initialize a pin as output for the Data/Command line on the display  */</span>
        <span class="n">DataCommandPin</span> <span class="p">=</span> <span class="n">IoController</span><span class="p">.</span><span class="n">OpenPin</span><span class="p">(</span><span class="n">DATA_COMMAND_PIN</span><span class="p">);</span>
        <span class="n">DataCommandPin</span><span class="p">.</span><span class="n">Write</span><span class="p">(</span><span class="n">GpioPinValue</span><span class="p">.</span><span class="n">High</span><span class="p">);</span>
        <span class="n">DataCommandPin</span><span class="p">.</span><span class="n">SetDriveMode</span><span class="p">(</span><span class="n">GpioPinDriveMode</span><span class="p">.</span><span class="n">Output</span><span class="p">);</span>

        <span class="cm">/* Initialize a pin as output for the hardware Reset line on the display */</span>
        <span class="n">ResetPin</span> <span class="p">=</span> <span class="n">IoController</span><span class="p">.</span><span class="n">OpenPin</span><span class="p">(</span><span class="n">RESET_PIN</span><span class="p">);</span>
        <span class="n">ResetPin</span><span class="p">.</span><span class="n">Write</span><span class="p">(</span><span class="n">GpioPinValue</span><span class="p">.</span><span class="n">High</span><span class="p">);</span>
        <span class="n">ResetPin</span><span class="p">.</span><span class="n">SetDriveMode</span><span class="p">(</span><span class="n">GpioPinDriveMode</span><span class="p">.</span><span class="n">Output</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="cm">/* If initialization fails, throw an exception */</span>
    <span class="k">catch</span> <span class="p">(</span><span class="n">Exception</span> <span class="n">ex</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nf">Exception</span><span class="p">(</span><span class="s">"GPIO initialization failed"</span><span class="p">,</span> <span class="n">ex</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></div>

<ul>
  <li>
    <p>We start by retrieving the default GPIO controller on the device with the <strong>GpioController.GetDefault()</strong> function.</p>
  </li>
  <li>
    <p>Next we initialize the <strong>DATA_COMMAND_PIN</strong> as output. This pin is used by the display to determine if data on the SPI bus is to be interpreted as graphics data or as a command.</p>
  </li>
  <li>
    <p>Finally we initialize the <strong>RESET_PIN</strong> as output. This pin is used to hardware-reset the display as part of the display initialization.</p>
  </li>
  <li>
    <p>If at any point we get a failure, we throw an exception to the top-level <strong>InitAll()</strong> function.</p>
  </li>
</ul>

<h4 id="initspi">InitSpi()</h4>
<p>Following the GPIO initialization, we initialize the SPI bus. The bus is used to send graphics data and commands to the OLED screen for display,
and needs to be configured before we can talk to the display.</p>

<div class="highlight"><pre><code class="language-c#" data-lang="c#"><span class="cm">/* Initialize the SPI bus */</span>
<span class="k">private</span> <span class="k">async</span> <span class="n">Task</span> <span class="nf">InitSpi</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">try</span>
    <span class="p">{</span>
        <span class="kt">var</span> <span class="n">settings</span> <span class="p">=</span> <span class="k">new</span> <span class="n">SpiConnectionSettings</span><span class="p">(</span><span class="n">SPI_CHIP_SELECT_LINE</span><span class="p">);</span> <span class="cm">/* Create SPI initialization settings                               */</span>
        <span class="n">settings</span><span class="p">.</span><span class="n">ClockFrequency</span> <span class="p">=</span> <span class="m">10000000</span><span class="p">;</span>                             <span class="cm">/* Datasheet specifies maximum SPI clock frequency of 10MHz         */</span>
        <span class="n">settings</span><span class="p">.</span><span class="n">Mode</span> <span class="p">=</span> <span class="n">SpiMode</span><span class="p">.</span><span class="n">Mode3</span><span class="p">;</span>                                  <span class="cm">/* The display expects an idle-high clock polarity, we use Mode3</span>
<span class="cm">                                                                         * to set the clock polarity and phase to: CPOL = 1, CPHA = 1</span>
<span class="cm">                                                                         */</span>

        <span class="kt">string</span> <span class="n">spiAqs</span> <span class="p">=</span> <span class="n">SpiDevice</span><span class="p">.</span><span class="n">GetDeviceSelector</span><span class="p">(</span><span class="n">SPI_CONTROLLER_NAME</span><span class="p">);</span>       <span class="cm">/* Find the selector string for the SPI bus controller          */</span>
        <span class="kt">var</span> <span class="n">devicesInfo</span> <span class="p">=</span> <span class="k">await</span> <span class="n">DeviceInformation</span><span class="p">.</span><span class="n">FindAllAsync</span><span class="p">(</span><span class="n">spiAqs</span><span class="p">);</span>         <span class="cm">/* Find the SPI bus controller device with our selector string  */</span>
        <span class="n">SpiDisplay</span> <span class="p">=</span> <span class="k">await</span> <span class="n">SpiDevice</span><span class="p">.</span><span class="n">FromIdAsync</span><span class="p">(</span><span class="n">devicesInfo</span><span class="p">[</span><span class="m">0</span><span class="p">].</span><span class="n">Id</span><span class="p">,</span> <span class="n">settings</span><span class="p">);</span>  <span class="cm">/* Create an SpiDevice with our bus controller and SPI settings */</span>

    <span class="p">}</span>
    <span class="cm">/* If initialization fails, display the exception and stop running */</span>
    <span class="k">catch</span> <span class="p">(</span><span class="n">Exception</span> <span class="n">ex</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nf">Exception</span><span class="p">(</span><span class="s">"SPI Initialization Failed"</span><span class="p">,</span> <span class="n">ex</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></div>

<ul>
  <li>We start by specifying some configuration settings for our SPI bus:
    <ol>
      <li>We specify which chip select line we want to use. This line is connected to the <strong>CS</strong> pin on the display, and lets the display controller know when we’re about to start a SPI bus transaction.</li>
      <li>The clock frequency is set to 10MHz. This is the rated speed for the display as documented in the <a href="http://www.adafruit.com/datasheets/SSD1306.pdf" target="_blank">datasheet</a>.</li>
      <li><strong>settings.Mode</strong> is set to <strong>SpiMode.Mode3</strong>. This configures clock polarity and phase for the bus as documented in the <a href="http://www.adafruit.com/datasheets/SSD1306.pdf" target="_blank">datasheet</a>.</li>
    </ol>
  </li>
  <li>
    <p>Next, we get the class selection string for our SPI controller. This controller controls the SPI lines on the exposed pin header. We then use the selection string to get the SPI bus controller matching our string name.</p>
  </li>
  <li>
    <p>Finally, we create a new <strong>SpiDevice</strong> with the settings and bus controller obtained previously.</p>
  </li>
  <li>If at any point we get a failure, we throw an exception to the top-level <strong>InitAll()</strong> function.</li>
</ul>

<h4 id="initdisplay">InitDisplay()</h4>
<p>Now that we have initialized GPIO and SPI, we can communicate with display. Before we can send graphics data however, we first need to configure some settings on the display controller.</p>

<div class="highlight"><pre><code class="language-c#" data-lang="c#"><span class="cm">/* Send SPI commands to power up and initialize the display */</span>
<span class="k">private</span> <span class="k">async</span> <span class="n">Task</span> <span class="nf">InitDisplay</span><span class="p">()</span>
<span class="p">{</span>
    <span class="cm">/* Initialize the display */</span>
    <span class="k">try</span>
    <span class="p">{</span>
        <span class="cm">/* See the datasheet for more details on these commands: http://www.adafruit.com/datasheets/SSD1306.pdf             */</span>
        <span class="k">await</span> <span class="nf">ResetDisplay</span><span class="p">();</span>                   <span class="cm">/* Perform a hardware reset on the display                                  */</span>
        <span class="n">DisplaySendCommand</span><span class="p">(</span><span class="n">CMD_CHARGEPUMP_ON</span><span class="p">);</span>  <span class="cm">/* Turn on the internal charge pump to provide power to the screen          */</span>
        <span class="n">DisplaySendCommand</span><span class="p">(</span><span class="n">CMD_MEMADDRMODE</span><span class="p">);</span>    <span class="cm">/* Set the addressing mode to "horizontal"                                  */</span>
        <span class="n">DisplaySendCommand</span><span class="p">(</span><span class="n">CMD_SEGREMAP</span><span class="p">);</span>       <span class="cm">/* Flip the display horizontally, so it's easier to read on the breadboard  */</span>
        <span class="n">DisplaySendCommand</span><span class="p">(</span><span class="n">CMD_COMSCANDIR</span><span class="p">);</span>     <span class="cm">/* Flip the display vertically, so it's easier to read on the breadboard    */</span>
        <span class="n">DisplaySendCommand</span><span class="p">(</span><span class="n">CMD_DISPLAY_ON</span><span class="p">);</span>     <span class="cm">/* Turn the display on                                                      */</span>
    <span class="p">}</span>
    <span class="k">catch</span> <span class="p">(</span><span class="n">Exception</span> <span class="n">ex</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nf">Exception</span><span class="p">(</span><span class="s">"Display Initialization Failed"</span><span class="p">,</span> <span class="n">ex</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></div>

<ul>
  <li>
    <p>We start by performing a hardware reset by calling <strong>ResetDisplay()</strong>. The function simply toggles the hardware Reset pin to reset the display.</p>
  </li>
  <li>
    <p>Next, we send it a series of commands using the <strong>DisplaySendCommand()</strong> function. This function is a wrapper around the <strong>SpiDevice.Write()</strong> function which sends the actual command over SPI.
These commands turn the display on and put it into a state where it’s ready to accept graphics data.</p>
  </li>
  <li>
    <p>If at any point we get a failure, we throw an exception to the top-level <strong>InitAll()</strong> function.</p>
  </li>
</ul>

<h3 id="text-display-code">Text Display Code</h3>

<p>Now that the display is initialized, we can send text to the screen. Previously in the initialization function, we registered <strong>Display_TextBox_TextChanged()</strong> to trigger any time the user changes the textbox.
This function calls the <strong>DisplayTextBoxContents()</strong> function below which runs through the process of writing text out to the screen:</p>

<div class="highlight"><pre><code class="language-c#" data-lang="c#"><span class="cm">/* Update the SPI display to mirror the textbox contents */</span>
<span class="k">private</span> <span class="k">void</span> <span class="nf">DisplayTextBoxContents</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">try</span>
    <span class="p">{</span>
        <span class="n">ClearDisplayBuf</span><span class="p">();</span>  <span class="cm">/* Blank the display buffer             */</span>
        <span class="n">WriteLineDisplayBuf</span><span class="p">(</span><span class="n">Display_TextBoxLine0</span><span class="p">.</span><span class="n">Text</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">);</span>
        <span class="n">WriteLineDisplayBuf</span><span class="p">(</span><span class="n">Display_TextBoxLine1</span><span class="p">.</span><span class="n">Text</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">1</span><span class="p">);</span>
        <span class="n">WriteLineDisplayBuf</span><span class="p">(</span><span class="n">Display_TextBoxLine2</span><span class="p">.</span><span class="n">Text</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">2</span><span class="p">);</span>
        <span class="n">WriteLineDisplayBuf</span><span class="p">(</span><span class="n">Display_TextBoxLine3</span><span class="p">.</span><span class="n">Text</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">3</span><span class="p">);</span>
        <span class="n">DisplayUpdate</span><span class="p">();</span>    <span class="cm">/* Write our changes out to the display */</span>
    <span class="p">}</span>
    <span class="cm">/* Show an error if we can't update the display */</span>
    <span class="k">catch</span> <span class="p">(</span><span class="n">Exception</span> <span class="n">ex</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">Text_Status</span><span class="p">.</span><span class="n">Text</span> <span class="p">=</span> <span class="s">"Status: Failed to update display"</span><span class="p">;</span>
        <span class="n">Text_Status</span><span class="p">.</span><span class="n">Text</span> <span class="p">=</span> <span class="s">"\nException: "</span> <span class="p">+</span> <span class="n">ex</span><span class="p">.</span><span class="n">Message</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="cm">/* Updates the display when the textbox contents change */</span>
<span class="k">private</span> <span class="k">void</span> <span class="nf">Display_TextBox_TextChanged</span><span class="p">(</span><span class="kt">object</span> <span class="n">sender</span><span class="p">,</span> <span class="n">TextChangedEventArgs</span> <span class="n">e</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">DisplayTextBoxContents</span><span class="p">();</span>
<span class="p">}</span></code></pre></div>

<ul>
  <li>
    <p><strong>ClearDisplayBuf()</strong> simply sets all bytes in our local display buffer to ‘0’ so we start with a blank slate.</p>
  </li>
  <li>
    <p>Next we call <strong>WriteLineDisplayBuf()</strong> to write a line of text from the textbox to our local display buffer.</p>
  </li>
  <li>
    <p>In <strong>DisplayUpdate()</strong>, we write the contents of our local buffer out to the display over SPI.</p>
  </li>
</ul>

<p>In the following sections, we’ll detail the <strong>WriteCharDisplayBuf()</strong> and <strong>DisplayUpdate()</strong> functions, which perform the bulk of the work in rendering character data and sending the data over SPI.</p>

<h4 id="writechardisplaybuf">WriteCharDisplayBuf()</h4>

<p>The <strong>WriteCharDisplayBuf()</strong> function performs the work to convert a single character into an array of bytes representing the character image data.
This function is frequently called by <strong>WriteLineDisplayBuf()</strong> to render individual characters in a string. Lets take a look at how it works.</p>

<div class="highlight"><pre><code class="language-c#" data-lang="c#"><span class="cm">/*</span>
<span class="cm"> * NAME:        WriteCharDisplayBuf</span>
<span class="cm"> * DESCRIPTION: Writes one character to the display screen buffer (DisplayUpdate() needs to be called subsequently to output the buffer to the screen)</span>
<span class="cm"> * INPUTS:</span>
<span class="cm"> *</span>
<span class="cm"> * Character: The character we want to draw. In this sample, special characters like tabs and newlines are not supported.</span>
<span class="cm"> * Col:       The horizontal column we want to start drawing at. This is equivalent to the 'X' axis pixel position.</span>
<span class="cm"> * Row:       The vertical row we want to write to. The screen is divided up into 4 rows of 16 pixels each, so valid values for Row are 0,1,2,3.</span>
<span class="cm"> *</span>
<span class="cm"> * RETURN VALUE:</span>
<span class="cm"> * We return the number of horizontal pixels used. This value is 0 if Row/Col are out-of-bounds, or if the character isn't available in the font.</span>
<span class="cm"> */</span>
<span class="k">private</span> <span class="n">UInt32</span> <span class="nf">WriteCharDisplayBuf</span><span class="p">(</span><span class="n">Char</span> <span class="n">Chr</span><span class="p">,</span> <span class="n">UInt32</span> <span class="n">Col</span><span class="p">,</span> <span class="n">UInt32</span> <span class="n">Row</span><span class="p">)</span>
<span class="p">{</span>
    <span class="cm">/* Check that we were able to find the font corresponding to our character */</span>
    <span class="n">FontCharacterDescriptor</span> <span class="n">CharDescriptor</span> <span class="p">=</span> <span class="n">DisplayFontTable</span><span class="p">.</span><span class="n">GetCharacterDescriptor</span><span class="p">(</span><span class="n">Chr</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">CharDescriptor</span> <span class="p">==</span> <span class="k">null</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="m">0</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="cm">/* Make sure we're drawing within the boundaries of the screen buffer */</span>
    <span class="n">UInt32</span> <span class="n">MaxRowValue</span> <span class="p">=</span> <span class="p">(</span><span class="n">SCREEN_HEIGHT_PAGES</span> <span class="p">/</span> <span class="n">DisplayFontTable</span><span class="p">.</span><span class="n">FontHeightBytes</span><span class="p">)</span> <span class="p">-</span> <span class="m">1</span><span class="p">;</span>
    <span class="n">UInt32</span> <span class="n">MaxColValue</span> <span class="p">=</span> <span class="n">SCREEN_WIDTH_PX</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">Row</span> <span class="p">&gt;</span> <span class="n">MaxRowValue</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="m">0</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">((</span><span class="n">Col</span> <span class="p">+</span> <span class="n">CharDescriptor</span><span class="p">.</span><span class="n">CharacterWidthPx</span> <span class="p">+</span> <span class="n">DisplayFontTable</span><span class="p">.</span><span class="n">FontCharSpacing</span><span class="p">)</span> <span class="p">&gt;</span> <span class="n">MaxColValue</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="m">0</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="n">UInt32</span> <span class="n">CharDataIndex</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span>
    <span class="n">UInt32</span> <span class="n">StartPage</span> <span class="p">=</span> <span class="n">Row</span> <span class="p">*</span> <span class="m">2</span><span class="p">;</span>
    <span class="n">UInt32</span> <span class="n">EndPage</span> <span class="p">=</span> <span class="n">StartPage</span> <span class="p">+</span> <span class="n">CharDescriptor</span><span class="p">.</span><span class="n">CharacterHeightBytes</span><span class="p">;</span>
    <span class="n">UInt32</span> <span class="n">StartCol</span> <span class="p">=</span> <span class="n">Col</span><span class="p">;</span>
    <span class="n">UInt32</span> <span class="n">EndCol</span> <span class="p">=</span> <span class="n">StartCol</span> <span class="p">+</span> <span class="n">CharDescriptor</span><span class="p">.</span><span class="n">CharacterWidthPx</span><span class="p">;</span>
    <span class="n">UInt32</span> <span class="n">CurrentPage</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span>
    <span class="n">UInt32</span> <span class="n">CurrentCol</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span>

    <span class="cm">/* Copy the character image into the display buffer */</span>
    <span class="k">for</span> <span class="p">(</span><span class="n">CurrentPage</span> <span class="p">=</span> <span class="n">StartPage</span><span class="p">;</span> <span class="n">CurrentPage</span> <span class="p">&lt;</span> <span class="n">EndPage</span><span class="p">;</span> <span class="n">CurrentPage</span><span class="p">++)</span>
    <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="n">CurrentCol</span> <span class="p">=</span> <span class="n">StartCol</span><span class="p">;</span> <span class="n">CurrentCol</span> <span class="p">&lt;</span> <span class="n">EndCol</span><span class="p">;</span> <span class="n">CurrentCol</span><span class="p">++)</span>
        <span class="p">{</span>
            <span class="n">DisplayBuffer</span><span class="p">[</span><span class="n">CurrentCol</span><span class="p">,</span> <span class="n">CurrentPage</span><span class="p">]</span> <span class="p">=</span> <span class="n">CharDescriptor</span><span class="p">.</span><span class="n">CharacterData</span><span class="p">[</span><span class="n">CharDataIndex</span><span class="p">];</span>
            <span class="n">CharDataIndex</span><span class="p">++;</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="cm">/* Pad blank spaces to the right of the character so there exists space between adjacent characters */</span>
    <span class="k">for</span> <span class="p">(</span><span class="n">CurrentPage</span> <span class="p">=</span> <span class="n">StartPage</span><span class="p">;</span> <span class="n">CurrentPage</span> <span class="p">&lt;</span> <span class="n">EndPage</span><span class="p">;</span> <span class="n">CurrentPage</span><span class="p">++)</span>
    <span class="p">{</span>
        <span class="k">for</span> <span class="p">(;</span> <span class="n">CurrentCol</span> <span class="p">&lt;</span> <span class="n">EndCol</span> <span class="p">+</span> <span class="n">DisplayFontTable</span><span class="p">.</span><span class="n">FontCharSpacing</span><span class="p">;</span> <span class="n">CurrentCol</span><span class="p">++)</span>
        <span class="p">{</span>
            <span class="n">DisplayBuffer</span><span class="p">[</span><span class="n">CurrentCol</span><span class="p">,</span> <span class="n">CurrentPage</span><span class="p">]</span> <span class="p">=</span> <span class="m">0</span><span class="n">x00</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="cm">/* Return the number of horizontal pixels used by the character */</span>
    <span class="k">return</span> <span class="n">CurrentCol</span> <span class="p">-</span> <span class="n">StartCol</span><span class="p">;</span>
<span class="p">}</span></code></pre></div>

<ul>
  <li>
    <p>We start by searching for a given character in our font table <strong>DisplayFontTable[]</strong>. This table contains pixel data for commonly used ASCII characters.
Note that special characters such as the newline character are not supported in this sample, and are ignored by <strong>WriteCharDisplayBuf()</strong>.</p>
  </li>
  <li>
    <p>Once we have the pixel dimensions for the character, we perform some checks to make sure it can fit within the boundaries of the screen.</p>
  </li>
  <li>
    <p>We then copy the character pixel data into our local screen buffer array <strong>DisplayBuffer[,]</strong>. This buffer holds a local copy of the contents of the screen.
We use this buffer since it’s much quicker to perform pixel operations on a local buffer first, and then send the data to the screen over SPI when we’ve completed our pixel manipulation.</p>
  </li>
  <li>
    <p>Afterwards we pad some space to the right of our character. That way characters printed adjacent to each other have a little bit of separation space.
Again, all of this is happening in our local screen buffer. No data has been sent to the screen yet.</p>
  </li>
</ul>

<h4 id="displayupdate">DisplayUpdate()</h4>
<p>After all of our data has been written to our local buffer. We’re ready to write it out over SPI to the screen. For this, we call <strong>DisplayUpdate()</strong>:</p>

<div class="highlight"><pre><code class="language-c#" data-lang="c#"><span class="cm">/* Writes the Display Buffer out to the physical screen for display */</span>
<span class="k">private</span> <span class="k">void</span> <span class="nf">DisplayUpdate</span><span class="p">()</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="n">Index</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span>
    <span class="cm">/* We convert our 2-dimensional array into a serialized string of bytes that will be sent out to the display */</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">PageY</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">PageY</span> <span class="p">&lt;</span> <span class="n">SCREEN_HEIGHT_PAGES</span><span class="p">;</span> <span class="n">PageY</span><span class="p">++)</span>
    <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">PixelX</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">PixelX</span> <span class="p">&lt;</span> <span class="n">SCREEN_WIDTH_PX</span><span class="p">;</span> <span class="n">PixelX</span><span class="p">++)</span>
        <span class="p">{</span>
            <span class="n">SerializedDisplayBuffer</span><span class="p">[</span><span class="n">Index</span><span class="p">]</span> <span class="p">=</span> <span class="n">DisplayBuffer</span><span class="p">[</span><span class="n">PixelX</span><span class="p">,</span> <span class="n">PageY</span><span class="p">];</span>
            <span class="n">Index</span><span class="p">++;</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="cm">/* Write the data out to the screen */</span>
    <span class="n">DisplaySendCommand</span><span class="p">(</span><span class="n">CMD_RESETCOLADDR</span><span class="p">);</span>         <span class="cm">/* Reset the column address pointer back to 0 */</span>
    <span class="n">DisplaySendCommand</span><span class="p">(</span><span class="n">CMD_RESETPAGEADDR</span><span class="p">);</span>        <span class="cm">/* Reset the page address pointer back to 0   */</span>
    <span class="n">DisplaySendData</span><span class="p">(</span><span class="n">SerializedDisplayBuffer</span><span class="p">);</span>     <span class="cm">/* Send the data over SPI                     */</span>
<span class="p">}</span></code></pre></div>

<ul>
  <li>
    <p>We start by iterating through our display buffer to convert our 2-dimensional buffer array into a single serialized array of data to be sent over SPI. Since we configured the display in “horizontal mode” previously,
we take horizontal “slices” of our display buffer and store them sequentially in the serialized buffer.</p>
  </li>
  <li>
    <p>Once we’ve completed serialization of the data, we send commands to reset the column and page address pointers of the display back to ‘0’. This ensures we start writing in the upper left corner of the screen.</p>
  </li>
  <li>
    <p>Finally, we call <strong>DisplaySendData()</strong> to send our buffer contents over SPI. This function is a wrapper around <strong>SpiDevice.Write()</strong>, which sends the entire buffer out over SPI.</p>
  </li>
</ul>

<div class="highlight"><pre><code class="language-c#" data-lang="c#"><span class="cm">/* Send graphics data to the screen */</span>
<span class="k">private</span> <span class="k">void</span> <span class="nf">DisplaySendData</span><span class="p">(</span><span class="kt">byte</span><span class="p">[]</span> <span class="n">Data</span><span class="p">)</span>
<span class="p">{</span>
    <span class="cm">/* When the Data/Command pin is high, SPI data is treated as graphics data  */</span>
    <span class="n">DataCommandPin</span><span class="p">.</span><span class="n">Write</span><span class="p">(</span><span class="n">GpioPinValue</span><span class="p">.</span><span class="n">High</span><span class="p">);</span>
    <span class="n">SpiDisplay</span><span class="p">.</span><span class="n">Write</span><span class="p">(</span><span class="n">Data</span><span class="p">);</span>
<span class="p">}</span></code></pre></div>


                </div>
            </div>
        </div>
    </div>
    <div class="chrome-header-wrapper">
        <div class="container iot-site-footer">
    <div class="row">
        <div class="col-md-12 text-center">
            <h3>Questions/Suggestions</h3>
            <p>As always, for questions or feedback, <a href="https://ms-iot.github.io/content/en-US/Community.htm#contact">contact us</a></p>
            <a href="https://github.com/ms-iot/content/blob/develop/en-US/win10/samples/SPIDisplay.md">
                <img src="./Windows IoT - SPI Display Sample_files/Octocat.png" class="nr">Edit this page on GitHub
            </a>
        </div>
    </div>
</div>

    </div>
    <script src="./Windows IoT - SPI Display Sample_files/jquery-1.11.2.min.js"></script>
<script src="./Windows IoT - SPI Display Sample_files/bootstrap.min.js"></script>
<script src="./Windows IoT - SPI Display Sample_files/app.js"></script>
<script type="text/JavaScript">
        var varAutoFirePV=1;
        var varClickTracking=1;
        var varCustomerTracking=1;
        var Route="13202";
        document.write("<script type='text/javascript' src='" + (window.location.protocol) + "//c.microsoft.com/ms.js'" + "'><\/script>");
</script><script type="text/javascript" src="./Windows IoT - SPI Display Sample_files/ms.js" '=""></script><iframe id="_msnFrame" src="./Windows IoT - SPI Display Sample_files/c.gif" style="z-index:-1;height:1px;width:1px;display:none;visibility:hidden;"></iframe>

    
  <!--[if lte IE 8]>
    <script src="https://assets.onestore.ms/cdnfiles/onestorerolling-1511-01000/shell/common/js/shell_ie8.js"></script>
<![endif]-->



<script src="./Windows IoT - SPI Display Sample_files/meversion"></script>
<script src="./Windows IoT - SPI Display Sample_files/shellservice.v1_4.min.js"></script>

<script src="./Windows IoT - SPI Display Sample_files/blender.js"></script>
<div class="shell-rwd shell-footer" lang="en" data-bi-area="Footer" data-bi-view="3xLinks">
    <div class="shell-footer-wrapper">
        <div class="shell-footer-lang">
                <ul>
                    <li>
                        <i class="shell-icon-globe"></i>
                    </li>
                    <li>
                        <a id="locale-picker-link" href="https://dev.windows.com/locale" data-bi-name="LocalePicker">
                              English (United States)‎
                        </a>
                    </li>
                </ul>
        </div>
        <div class="shell-footer-copyright">
            <ul>
                            <li>
                                <a id="privacyandcookies" href="https://go.microsoft.com/fwlink/p/?LinkId=521839" class="ctl_footerNavLink" data-bi-name="PrivacyAndCookies" data-bi-slot="1">
                                    Privacy and cookies
                                </a>
                            </li>
                            <li>
                                <a id="termsofuse" href="https://go.microsoft.com/fwlink/p/?linkid=248155" class="ctl_footerNavLink" data-bi-name="TermsOfUse" data-bi-slot="2">
                                    Terms of use
                                </a>
                            </li>
                            <li>
                                <a id="trademarks" href="https://go.microsoft.com/fwlink/p/?linkid=248154" class="ctl_footerNavLink" data-bi-name="Trademarks" data-bi-slot="3">
                                    Trademarks
                                </a>
                            </li>

                <li class="ctl_footerCopyright">
                    © 2015 Microsoft
                </li>
            </ul>
        </div>
    </div>
</div>





</body></html>